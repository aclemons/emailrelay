E-MailRelay Change Log
======================

1.3 -> 1.3.1
------------
* Windows resource leak from CreateProcess() fixed.
* Windows dialog box double-closure bug fixed.
* Windows WinMain() calls setlocale().

1.2 -> 1.3
----------
* Client protocol waits for a greeting from the server on startup [bug-id 842156].
* Fix for incorrect backslash normalisation on "--verifier" command-lines containing spaces [bug-id 890646].
* Verifier programs can now summarily abort a connection using an exit value of 100.
* New "--anonymous" switch that reduces information leakage to the SMTP client and disables "VRFY".
* Better validation of "MAIL-FROM" and "RCPT-TO" formatting.
* Rewrite of low-level MD5 code.
* Performance tuning.
* Template "emailrelay.conf" gets installed in "/etc".
* New switches for the "configure" script.
* More JavaScript example scripts.

1.1.2 -> 1.2
------------
* The "--filter" and "--verifier" arguments interpreted as command-lines; spaces in executable paths now need escaping.
* The "--interface" switch applies to outgoing connections too.
* New "--client-filter" switch to do synchronous message processing before sending.
* Keeps authentication after a "rset" command.
* Fix for dangling reference bug, seen after "quit" command on Windows.
* JavaScript examples in the documentation.

1.1.1 -> 1.1.2
--------------
* Earlier check for un-bindable ports on startup, and later fork()ing [bug-id 776972].
* Resolved the file-descriptor kludge for "--verifier" on Windows.
* Less strict about failing eight bit messages sent to servers with no "8BITMIME" extension.
* Supplementary group memberships revoked at startup if root or suid.
* Pre-processor ("--filter") program's standard output searched for a failure reason string.
* Undocumented "--scanner" switch added for asynchronous processing by a separate network server.

1.1.0 -> 1.1.1
--------------
* Restored the fix for building with gcc2.96.
* Support for MinGW builds on Windows.
* More reasonable size of the "--help --verbose" message box on Windows.
* Windows "--icon" switch changed from "-i" to "-c" to avoid conflicting with "--interface".
* Shows "next server address" correctly in the configuration report when using "--forward-to".
* Fix for "make install" when "man2html" is not available.
* Updated init script.

1.0.2 -> 1.1.0
--------------
* In proxy mode unexpected client-side disconnects and timeouts do not leave ".bad" files [see also bug-id 659039].
* By default proxy mode does not interpret addresses for local delivery ("--postmaster").
* Polling option added ("--poll") to rescan the spool directory periodically.
* New special exit code (103) for the pre-processor to trigger immediate polling; 100 to 107 now reserved.
* Orphaned zero-length content files are deleted properly if the server-side dialogue is cut short.
* The "--interface" switch applies to the "--admin" interface too.
* Improved internal event architecture using slot/signal design pattern, and fewer singleton classes.
* Event notification available through the administration interface.
* New "--hidden" switch for Windows.
* Syslog output includes process-id.
* Support for Sun WorkShop 5.0 added.
* Documentation overhaul.

1.0.0 -> 1.0.2
--------------
* Support for trusted IP addresses, allowing certain clients to avoid authentication.
* Address verifier interface extended to include authentication information.
* New public mail relay section added to the user guide.
* Example verifier scripts etc. added to the reference guide.

1.0.0 -> 1.0.1
--------------
* In proxy mode unexpected client-side disconnects and timeouts result in ".bad" files [bug-id 659039].
* Require successful "AUTH" before "MAIL FROM" when using "--server-auth".
* Better word-wrap on "--help" output.
* Use of RedHat's "functions" code, and support for "chkconfig", added to the "init.d" script.
* Builds with gcc3.2 (1.0.0-pl5).
* Fix for files left as "busy" after a connection failure in proxy mode [bug-id 631032] (1.0.0-pl3/4/5).
* Trivial documentation fixes (1.0.0-pl3).
* Fix for the double-dot escape bug in the client protocol [bug-id 611624] (1.0.0-pl2).
* Fix build when using gcc2.96 rather than gcc2.95 (1.0.0-pl1).
* Fix default spool directory in example scripts (1.0.0-pl1).

0.9.9 -> 1.0.0
--------------
* Briefer "--help" output; works with "--verbose".
* Option to listen on a specific network interface ("--interface").
* Option for an external address verifier program ("--verifier").
* Some Linux Standard Base stuff added to the "init.d" script.
* Pid files world-readable and deleted on abnormal termination.
* Compiles with gcc 3.0 and intel 6.0.
* Autoconf tweak for MacOS X.
* Corrected the "Received:" typo [bug-id 572236].
* EHLO response parsing is now case-insensitive [bug-id 561522].
* Fewer missing-secrets warnings [bug-id 564987].

0.9.8 -> 0.9.9
--------------
* More flexible logging options ("--verbose" and "--debug" work better).
* File Hierarchy Standard (FHS) option for "configure" ("--enable-fhs").
* FHS-compatible RPMs.
* Spool files writeable by pre-processor when server started as root.
* Default directories in executables and scripts come from "configure".
* The "init.d" script is renamed "emailrelay" (was "emailrelay.sh").
* Man pages are gzipped when installed.
* Fix for access violation under Windows NT when client disconnects.
* Use of event log when compiled on Windows NT.
* Fix for info-after-flush bug when using the administration interface. [rc2]
* New "resubmit" script. [rc2]
* Submit utility works under Windows. [rc2]
* Improved Windows project files. [rc2]

0.9.7 -> 0.9.8
--------------
* Fix for running pre-processor ("--filter") as root.
* Ignore bogus "AUTH=LOGIN" lines in EHLO response.
* Submit utility improved to work with mutt.
* Installation of submit man page.

0.9.6 -> 0.9.7
--------------
* CRAM-MD5 authentication mechanism added.
* Revoke root permissions at start up, and reclaim them when needed.
* Allow mail pre-processing ("--filter") when started as root.
* Domain-override switch ("--domain") added.
* Non-privileged user switch ("--user") added.
* Better handling of NarrowPipe exception (ie. 8-bit message to 7-bit server).
* Allow null return path in MAIL-FROM.
* Reject recipients which look like "<user>@localhost" (as used by fetchmail for local delivery).
* Treat recipients which look like "postmaster@localhost" or "postmaster@<fqdn>" as local postmaster.
* Optional timestamps on log output ("--log-time").
* Fix EHLO to HELO fallback for 501/502 responses in client protocol.
* Submission utility "emailrelay-submit" added.
* HTML4.0 compliant HTML documentation, using CSS.

0.9.5 -> 0.9.6
--------------
* SMTP AUTHentication extension -- LOGIN mechanism only.
* Client-side protocol timeout.
* Client-side connection timeout.
* Preprocessor can cancel further message processing.
* Client's IP address recorded in envelope files.
* Multiple hard-coded listening addresses supported at compile-time.
* Fix for automatic reopening of stderr stream.

0.9.4 -> 0.9.5
--------------
Windows fixes and improvements...
* system-tray + dialog-box user interface
* fix for dropped connections
* fix for content file deletion
* fix for directory iterator

0.9.3 -> 0.9.4
--------------
* Fixed memory leak when no "--log" switch.
* Windows build is more "gui" and less "command-line".
* "Info" command added to the administration interface.
* Doxygen files removed from binary RPM.

0.9.2 -> 0.9.3
--------------
* Proxy mode ("--immediate" and "--as-proxy").
* Message pre-processing ("--filter").
* Message store classes better separated using abstract interfaces.
* Improved notification script, with MIME encoding.
* Builds with old 2.91 version of gcc.

0.9.1 -> 0.9.2
--------------
* Better autoconf detection.
* Workround for FreeBSD uname() feature.
* Added missing ".sh_" files to the distribution.
* Fixed a benign directory iterator bug.
* Use of gcc's "exception" header.

0.9 -> 0.9.1
------------
* Improved documentation from doxygen.
* More complete use of namespaces.
* Experimental compile-time support for IPv6.

